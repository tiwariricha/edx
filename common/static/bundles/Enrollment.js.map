{"version":3,"sources":["webpack:///./openedx/features/course_experience/static/course_experience/js/Enrollment.js"],"names":["CourseEnrollment","url","window","location","href","reload","courseId","data","JSON","stringify","course_details","course_id","enrollmentAPI","trackSelection","$","ajax","type","contentType","done","analytics","track","refresh","fail","redirect","buttonClass","click","createEnrollment"],"mappings":";;;;;;;;;;;;AACA;;;AAGA,IAAaA,gBAAb;AAAA;AAAA;AAAiC;AAC/B;;;;AADF,6BAKkBC,GALlB,EAKuB;AACnBC,aAAOC,QAAP,CAAgBC,IAAhB,GAAuBH,GAAvB;AACD;AAPH;AAAA;AAAA,8BASmB;AACfC,aAAOC,QAAP,CAAgBE,MAAhB,CAAuB,KAAvB;AACD;AAXH;AAAA;AAAA,qCAa0BC,QAb1B,EAaoC;AAChC,UAAMC,OAAOC,KAAKC,SAAL,CAAe;AAC1BC,wBAAgB,EAAEC,WAAWL,QAAb;AADU,OAAf,CAAb;AAGA,UAAMM,gBAAgB,+BAAtB;AACA,UAAMC,iBAAiB,uBAAvB;;AAEA,aAAO;AAAA,eACLC,EAAEC,IAAF,CACE;AACEC,gBAAM,MADR;AAEEf,eAAKW,aAFP;AAGEL,oBAHF;AAIEU,uBAAa;AAJf,SADF,EAMKC,IANL,CAMU,YAAM;AACZhB,iBAAOiB,SAAP,CAAiBC,KAAjB,CAAuB,oCAAvB;AACApB,2BAAiBqB,OAAjB;AACD,SATH,EASKC,IATL,CASU,YAAM;AACZ;AACA;AACAtB,2BAAiBuB,QAAjB,CAA0BV,iBAAiBP,QAA3C;AACD,SAbH,CADK;AAAA,OAAP;AAeD;AAnCH;;AAqCE,4BAAYkB,WAAZ,EAAyBlB,QAAzB,EAAmC;AAAA;;AACjCQ,MAAEU,WAAF,EAAeC,KAAf,CAAqBzB,iBAAiB0B,gBAAjB,CAAkCpB,QAAlC,CAArB;AACD;;AAvCH;AAAA,I","file":"Enrollment.js","sourcesContent":["\n/*\n * Course Enrollment on the Course Home page\n */\nexport class CourseEnrollment {  // eslint-disable-line import/prefer-default-export\n  /**\n   * Redirect to a URL.  Mainly useful for mocking out in tests.\n   * @param  {string} url The URL to redirect to.\n   */\n  static redirect(url) {\n    window.location.href = url;\n  }\n\n  static refresh() {\n    window.location.reload(false);\n  }\n\n  static createEnrollment(courseId) {\n    const data = JSON.stringify({\n      course_details: { course_id: courseId },\n    });\n    const enrollmentAPI = '/api/enrollment/v1/enrollment';\n    const trackSelection = '/course_modes/choose/';\n\n    return () =>\n      $.ajax(\n        {\n          type: 'POST',\n          url: enrollmentAPI,\n          data,\n          contentType: 'application/json',\n        }).done(() => {\n          window.analytics.track('edx.bi.user.course-home.enrollment');\n          CourseEnrollment.refresh();\n        }).fail(() => {\n          // If the simple enrollment we attempted failed, go to the track selection page,\n          // which is better for handling more complex enrollment situations.\n          CourseEnrollment.redirect(trackSelection + courseId);\n        });\n  }\n\n  constructor(buttonClass, courseId) {\n    $(buttonClass).click(CourseEnrollment.createEnrollment(courseId));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/Enrollment.js"],"sourceRoot":""}