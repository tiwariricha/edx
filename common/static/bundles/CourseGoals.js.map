{"version":3,"sources":["webpack:///./openedx/features/course_experience/static/course_experience/js/CourseGoals.js"],"names":["CourseGoals","options","$","click","e","goalKey","target","data","choice","ajax","method","url","goalApiUrl","headers","cookie","goal_key","course_key","courseId","user","username","dataType","success","slideDown","text","goal_text","val","successMsg","HtmlUtils","interpolateHtml","gettext","goal","toLowerCase","is_unsure","html","parent","hide","error","errorMsg","keypress","which"],"mappings":";;;;;;;;;;;;AAAA;;AAEA;;AAEA,IAAaA,WAAb,GAA4B;;AAE1B,qBAAYC,OAAZ,EAAqB;AAAA;;AACnBC,IAAE,cAAF,EAAkBC,KAAlB,CAAwB,UAACC,CAAD,EAAO;AAC7B,QAAMC,UAAUH,EAAEE,EAAEE,MAAJ,EAAYC,IAAZ,GAAmBC,MAAnC;AACAN,MAAEO,IAAF,CAAO;AACLC,cAAQ,MADH;AAELC,WAAKV,QAAQW,UAFR;AAGLC,eAAS,EAAE,eAAeX,EAAEY,MAAF,CAAS,WAAT,CAAjB,EAHJ;AAILP,YAAM;AACJQ,kBAAUV,OADN;AAEJW,oBAAYf,QAAQgB,QAFhB;AAGJC,cAAMjB,QAAQkB;AAHV,OAJD;AASLC,gBAAU,MATL;AAULC,eAAS,iBAACd,IAAD,EAAU;AAAE;AACnBL,UAAE,gBAAF,EAAoBoB,SAApB;AACApB,UAAE,4BAAF,EAAgCqB,IAAhC,CAAqChB,KAAKiB,SAA1C;AACAtB,UAAE,uBAAF,EAA2BuB,GAA3B,CAA+BlB,KAAKQ,QAApC;AACA,YAAMW,aAAa,0EAAAC,CAAUC,eAAV,CACjBC,QAAQ,mDAAR,CADiB,EAEjB,EAAEC,MAAMvB,KAAKiB,SAAL,CAAeO,WAAf,EAAR,EAFiB,CAAnB;AAIA,YAAI,CAACxB,KAAKyB,SAAV,EAAqB;AACnB;AACA9B,YAAE,kBAAF,EAAsB+B,IAAtB,mCAA2DP,UAA3D;AACD,SAHD,MAGO;AACLxB,YAAE,kBAAF,EAAsBgC,MAAtB,GAA+BC,IAA/B;AACD;AACF,OAxBI;AAyBLC,aAAO,iBAAM;AAAE;AACb,YAAMC,WAAWR,QAAQ,gFAAR,CAAjB;AACA;AACA3B,UAAE,kBAAF,EAAsB+B,IAAtB,kCAA0DI,QAA1D;AACD;AA7BI,KAAP;AA+BD,GAjCD;;AAmCA;AACAnC,IAAE,cAAF,EAAkBoC,QAAlB,CAA2B,UAAClC,CAAD,EAAO;AAChC,QAAIA,EAAEmC,KAAF,KAAY,EAAhB,EAAoB;AAClBrC,QAAEE,EAAEE,MAAJ,EAAYH,KAAZ;AACD;AACF,GAJD;AAKD,CA5CH,C","file":"CourseGoals.js","sourcesContent":["/* globals gettext */\n\nimport HtmlUtils from 'edx-ui-toolkit/js/utils/html-utils';\n\nexport class CourseGoals {  // eslint-disable-line import/prefer-default-export\n\n  constructor(options) {\n    $('.goal-option').click((e) => {\n      const goalKey = $(e.target).data().choice;\n      $.ajax({\n        method: 'POST',\n        url: options.goalApiUrl,\n        headers: { 'X-CSRFToken': $.cookie('csrftoken') },\n        data: {\n          goal_key: goalKey,\n          course_key: options.courseId,\n          user: options.username,\n        },\n        dataType: 'json',\n        success: (data) => { // LEARNER-2522 will address the success message\n          $('.section-goals').slideDown();\n          $('.section-goals .goal .text').text(data.goal_text);\n          $('.section-goals select').val(data.goal_key);\n          const successMsg = HtmlUtils.interpolateHtml(\n            gettext('Thank you for setting your course goal to {goal}!'),\n            { goal: data.goal_text.toLowerCase() },\n          );\n          if (!data.is_unsure) {\n            // xss-lint: disable=javascript-jquery-html\n            $('.message-content').html(`<div class=\"success-message\">${successMsg}</div>`);\n          } else {\n            $('.message-content').parent().hide();\n          }\n        },\n        error: () => { // LEARNER-2522 will address the error message\n          const errorMsg = gettext('There was an error in setting your goal, please reload the page and try again.');\n          // xss-lint: disable=javascript-jquery-html\n          $('.message-content').html(`<div class=\"error-message\"> ${errorMsg} </div>`);\n        },\n      });\n    });\n\n    // Allow goal selection with an enter press for accessibility purposes\n    $('.goal-option').keypress((e) => {\n      if (e.which === 13) {\n        $(e.target).click();\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/CourseGoals.js"],"sourceRoot":""}