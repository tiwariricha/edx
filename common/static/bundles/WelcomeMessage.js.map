{"version":3,"sources":["webpack:///./common/static/common/js/utils/clamp-html.js","webpack:///./common/static/js/vendor/jquery.cookie.js?f386****","webpack:///./openedx/features/course_experience/static/course_experience/js/WelcomeMessage.js","webpack:///external \"gettext\"?8b52*******"],"names":["clampHtmlByWords","root","wordsLeft","nodeName","remaining","nodes","Array","from","childNodes","words","chopped","data","split","filter","Boolean","length","slice","join","match","forEach","node","removeChild","module","exports","$","cookie","key","value","options","arguments","test","Object","prototype","toString","call","undefined","extend","expires","days","t","Date","setDate","getDate","String","document","encodeURIComponent","raw","toUTCString","path","domain","secure","decode","s","decodeURIComponent","pairs","i","pair","jQuery","WelcomeMessage","dismissUrl","ajax","type","url","headers","success","hide","dismissWelcomeMessage","click","messageContent","querySelector","fullText","innerHTML","showMoreButton","shortText","removeAttribute","addEventListener","event","getAttribute","textContent","gettext","setAttribute","stopImmediatePropagation"],"mappings":"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","file":"WelcomeMessage.js","sourcesContent":["/**\n * Used to ellipsize a section of arbitrary HTML after a specified number of words.\n *\n * Note: this will modify the DOM structure of root in place.\n * To keep the original around, you may want to save the result of cloneNode(true) before calling this method.\n *\n * Known bug: This method will ignore any special whitespace in the source and simply output single spaces.\n * Which means that &nbsp; will not be respected. This is not considered worth solving at time of writing.\n *\n * Returns how many words remain (or a negative number if the content got clamped)\n */\nfunction clampHtmlByWords(root, wordsLeft) {\n    'use strict';\n\n    if (root.nodeName === 'SCRIPT' || root.nodeName === 'STYLE') {\n        return wordsLeft; // early exit and ignore\n    }\n\n    var remaining = wordsLeft;\n    var nodes = Array.from(root.childNodes ? root.childNodes : []);\n    var words, chopped;\n\n    // First, cut short any text in our node, as necessary\n    if (root.nodeName === '#text' && root.data) {\n        // split on words, ignoring any resulting empty strings\n        words = root.data.split(/\\s+/).filter(Boolean);\n        if (remaining < 0) {\n            root.data = ''; // eslint-disable-line no-param-reassign\n        } else if (remaining > words.length) {\n            remaining -= words.length;\n        } else {\n            // OK, let's add an ellipsis and cut some of root.data\n            chopped = words.slice(0, remaining).join(' ') + 'â€¦';\n            // But be careful to get any preceding space too\n            if (root.data.match(/^\\s/)) {\n                chopped = ' ' + chopped;\n            }\n            root.data = chopped; // eslint-disable-line no-param-reassign\n            remaining = -1;\n        }\n    }\n\n    // Now do the same for any child nodes\n    nodes.forEach(function(node) {\n        if (remaining < 0) {\n            root.removeChild(node);\n        } else {\n            remaining = clampHtmlByWords(node, remaining);\n        }\n    });\n\n    return remaining;\n}\n\nmodule.exports = {\n    clampHtmlByWords: clampHtmlByWords\n};\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/common/js/utils/clamp-html.js","/*!\n * jQuery Cookie Plugin\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2011, Klaus Hartl\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.opensource.org/licenses/GPL-2.0\n */\n(function($) {\n    $.cookie = function(key, value, options) {\n\n        // key and at least value given, set cookie...\n        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {\n            options = $.extend({}, options);\n\n            if (value === null || value === undefined) {\n                options.expires = -1;\n            }\n\n            if (typeof options.expires === 'number') {\n                var days = options.expires, t = options.expires = new Date();\n                t.setDate(t.getDate() + days);\n            }\n\n            value = String(value);\n\n            return (document.cookie = [\n                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\n                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n                options.path    ? '; path=' + options.path : '',\n                options.domain  ? '; domain=' + options.domain : '',\n                options.secure  ? '; secure' : ''\n            ].join(''));\n        }\n\n        // key and possibly options given, get cookie...\n        options = value || {};\n        var decode = options.raw ? function(s) { return s; } : decodeURIComponent;\n\n        var pairs = document.cookie.split('; ');\n        for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {\n            if (decode(pair[0]) === key) return decode(pair[1] || ''); // IE saves cookies with empty string as \"c; \", e.g. without \"=\" as opposed to EOMB, thus pair[1] may be undefined\n        }\n        return null;\n    };\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/jquery.cookie.js","/* globals $ */\nimport 'jquery.cookie';\nimport gettext from 'gettext'; // eslint-disable-line\nimport { clampHtmlByWords } from 'common/js/utils/clamp-html'; // eslint-disable-line\n\nexport class WelcomeMessage {  // eslint-disable-line import/prefer-default-export\n\n  static dismissWelcomeMessage(dismissUrl) {\n    $.ajax({\n      type: 'POST',\n      url: dismissUrl,\n      headers: {\n        'X-CSRFToken': $.cookie('csrftoken'),\n      },\n      success: () => {\n        $('.welcome-message').hide();\n      },\n    });\n  }\n\n  constructor(options) {\n    // Dismiss the welcome message if the user clicks dismiss, or auto-dismiss if\n    // the user doesn't click dismiss in 7 days from when it was first viewed.\n\n    // Check to see if the welcome message has been displayed at all.\n    if ($('.welcome-message').length > 0) {\n      // If the welcome message has been viewed.\n      if ($.cookie('welcome-message-viewed') === 'True') {\n        // If the timer cookie no longer exists, dismiss the welcome message permanently.\n        if ($.cookie('welcome-message-timer') !== 'True') {\n          WelcomeMessage.dismissWelcomeMessage(options.dismissUrl);\n        }\n      } else {\n        // Set both the viewed cookie and the timer cookie.\n        $.cookie('welcome-message-viewed', 'True', { expires: 365 });\n        $.cookie('welcome-message-timer', 'True', { expires: 7 });\n      }\n    }\n    $('.dismiss-message button').click(() => WelcomeMessage.dismissWelcomeMessage(options.dismissUrl));\n\n\n    // \"Show More\" support for welcome messages\n    const messageContent = document.querySelector('#welcome-message-content');\n    const fullText = messageContent.innerHTML;\n    if (clampHtmlByWords(messageContent, 100) < 0) {\n      const showMoreButton = document.querySelector('#welcome-message-show-more');\n      const shortText = messageContent.innerHTML;\n\n      showMoreButton.removeAttribute('hidden');\n\n      showMoreButton.addEventListener('click', (event) => {\n        if (showMoreButton.getAttribute('data-state') === 'less') {\n          showMoreButton.textContent = gettext('Show More');\n          messageContent.innerHTML = shortText;\n          showMoreButton.setAttribute('data-state', 'more');\n        } else {\n          showMoreButton.textContent = gettext('Show Less');\n          messageContent.innerHTML = fullText;\n          showMoreButton.setAttribute('data-state', 'less');\n        }\n        event.stopImmediatePropagation();\n      });\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/WelcomeMessage.js","(function() { module.exports = window[\"gettext\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gettext\"\n// module id = 3\n// module chunks = 4 7 8 9 11 20 23 24 35"],"sourceRoot":""}