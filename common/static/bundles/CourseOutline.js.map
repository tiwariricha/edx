{"version":3,"sources":["webpack:///./~/edx-ui-toolkit/src/js/utils/constants.js?1652***","webpack:///./openedx/features/course_experience/static/course_experience/js/CourseOutline.js"],"names":["CourseOutline","focusable","document","querySelectorAll","forEach","el","addEventListener","event","index","indexOf","target","key","keys","down","preventDefault","Math","min","length","focus","up","max","link","Logger","log","current_url","window","location","href","target_url","currentTarget","expandSection","sectionToggleButton","$toggleButtonChevron","$","children","$contentPanel","getElementById","getAttribute","slideDown","removeClass","addClass","setAttribute","collapseSection","slideUp","accordion","sections","Array","prototype","slice","call","section","classList","contains","isExpanded","stopImmediatePropagation","toggleAllButton","querySelector","toggleAllSpan","extraPaddingClass","toggleAllExpanded","sectionAction","add","innerText","gettext","remove","urlHash","hash","button","substr","parentLi","closest","parentButton"],"mappings":"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","file":"CourseOutline.js","sourcesContent":["/**\n * Reusable constants.\n */\n(function(define) {\n    'use strict';\n    define([], function() {\n        /**\n         * Reusable constants.\n         *\n         * ### keys - A mapping of key names to their corresponding identifiers.\n         * ### keyCodes - A mapping of key names to their corresponding keyCodes (DEPRECATED).\n         *\n         * - `constants.keys.tab` - the tab key\n         * - `constants.keys.enter` - the enter key\n         * - `constants.keys.esc` - the escape key\n         * - `constants.keys.space` - the space key\n         * - `constants.keys.left` - the left arrow key\n         * - `constants.keys.up` - the up arrow key\n         * - `constants.keys.right` - the right arrow key\n         * - `constants.keys.down` - the down arrow key\n         *\n         * @class constants\n         */\n        return {\n            keys: {\n                tab: 'Tab',\n                enter: 'Enter',\n                esc: 'Escape',\n                space: 'Space',\n                left: 'ArrowLeft',\n                up: 'ArrowUp',\n                right: 'ArrowRight',\n                down: 'ArrowDown'\n            },\n            // NOTE: keyCode is deprecated. Use the `key` or `code` event property if possible.\n            // See: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\n            keyCodes: {\n                tab: 9,\n                enter: 13,\n                esc: 27,\n                space: 32,\n                left: 37,\n                up: 38,\n                right: 39,\n                down: 40\n            }\n        };\n    });\n}).call(\n    this,\n    // Pick a define function as follows:\n    // 1. Use the default 'define' function if it is available\n    // 2. If not, use 'RequireJS.define' if that is available\n    // 3. else use the GlobalLoader to install the class into the edx namespace\n    // eslint-disable-next-line no-nested-ternary\n    typeof define === 'function' && define.amd ? define :\n        (typeof RequireJS !== 'undefined' ? RequireJS.define :\n            edx.GlobalLoader.defineAs('constants', 'edx-ui-toolkit/js/utils/constants'))\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/edx-ui-toolkit/src/js/utils/constants.js\n// module id = ./node_modules/edx-ui-toolkit/src/js/utils/constants.js\n// module chunks = 7 8 9 11 42","/* globals Logger */\n\nimport { keys } from 'edx-ui-toolkit/js/utils/constants';\n\n// @TODO: Figure out how to make webpack handle default exports when libraryTarget: 'window'\nexport class CourseOutline {  // eslint-disable-line import/prefer-default-export\n  constructor() {\n    const focusable = [...document.querySelectorAll('.outline-item.focusable')];\n\n    focusable.forEach(el => el.addEventListener('keydown', (event) => {\n      const index = focusable.indexOf(event.target);\n\n      switch (event.key) {  // eslint-disable-line default-case\n        case keys.down:\n          event.preventDefault();\n          focusable[Math.min(index + 1, focusable.length - 1)].focus();\n          break;\n        case keys.up:  // @TODO: Get these from the UI Toolkit\n          event.preventDefault();\n          focusable[Math.max(index - 1, 0)].focus();\n          break;\n      }\n    }));\n\n    [...document.querySelectorAll('a:not([href^=\"#\"])')]\n      .forEach(link => link.addEventListener('click', (event) => {\n        Logger.log(\n          'edx.ui.lms.link_clicked',\n          {\n            current_url: window.location.href,\n            target_url: event.currentTarget.href,\n          },\n        );\n      }),\n    );\n\n    function expandSection(sectionToggleButton) {\n      const $toggleButtonChevron = $(sectionToggleButton).children('.fa-chevron-right');\n      const $contentPanel = $(document.getElementById(sectionToggleButton.getAttribute('aria-controls')));\n\n      $contentPanel.slideDown();\n      $contentPanel.removeClass('is-hidden');\n      $toggleButtonChevron.addClass('fa-rotate-90');\n      sectionToggleButton.setAttribute('aria-expanded', 'true');\n    }\n\n    function collapseSection(sectionToggleButton) {\n      const $toggleButtonChevron = $(sectionToggleButton).children('.fa-chevron-right');\n      const $contentPanel = $(document.getElementById(sectionToggleButton.getAttribute('aria-controls')));\n\n      $contentPanel.slideUp();\n      $contentPanel.addClass('is-hidden');\n      $toggleButtonChevron.removeClass('fa-rotate-90');\n      sectionToggleButton.setAttribute('aria-expanded', 'false');\n    }\n\n    [...document.querySelectorAll(('.accordion'))]\n      .forEach((accordion) => {\n        const sections = Array.prototype.slice.call(accordion.querySelectorAll('.accordion-trigger'));\n\n        sections.forEach(section => section.addEventListener('click', (event) => {\n          const sectionToggleButton = event.currentTarget;\n          if (sectionToggleButton.classList.contains('accordion-trigger')) {\n            const isExpanded = sectionToggleButton.getAttribute('aria-expanded') === 'true';\n            if (!isExpanded) {\n              expandSection(sectionToggleButton);\n            } else if (isExpanded) {\n              collapseSection(sectionToggleButton);\n            }\n            event.stopImmediatePropagation();\n          }\n        }));\n      });\n\n    const toggleAllButton = document.querySelector('#expand-collapse-outline-all-button');\n    const toggleAllSpan = document.querySelector('#expand-collapse-outline-all-span');\n    const extraPaddingClass = 'expand-collapse-outline-all-extra-padding';\n    toggleAllButton.addEventListener('click', (event) => {\n      const toggleAllExpanded = toggleAllButton.getAttribute('aria-expanded') === 'true';\n      let sectionAction;\n      /* globals gettext */\n      if (toggleAllExpanded) {\n        toggleAllButton.setAttribute('aria-expanded', 'false');\n        sectionAction = collapseSection;\n        toggleAllSpan.classList.add(extraPaddingClass);\n        toggleAllSpan.innerText = gettext('Expand All');\n      } else {\n        toggleAllButton.setAttribute('aria-expanded', 'true');\n        sectionAction = expandSection;\n        toggleAllSpan.classList.remove(extraPaddingClass);\n        toggleAllSpan.innerText = gettext('Collapse All');\n      }\n      const sections = Array.prototype.slice.call(document.querySelectorAll('.accordion-trigger'));\n      sections.forEach((sectionToggleButton) => {\n        sectionAction(sectionToggleButton);\n      });\n      event.stopImmediatePropagation();\n    });\n\n    const urlHash = window.location.hash;\n\n    if (urlHash !== '') {\n      const button = document.getElementById(urlHash.substr(1, urlHash.length));\n      if (button.classList.contains('subsection-text')) {\n        const parentLi = button.closest('.section');\n        const parentButton = parentLi.querySelector('.section-name');\n        expandSection(parentButton);\n      }\n      expandSection(button);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/CourseOutline.js"],"sourceRoot":""}